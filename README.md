# DungeonGame
Little dungeon crawling game I made with GameMaker Studio 1.4 inspired by the Mystery Dungeon series.
I made this some time before starting university and before any formal education on software engineering.
The objective of the game is to reach the stairs, defeating enemies along the way.
Currently, the game does not end.

# How to play
Simply download the DungeonTest folder and run the .exe file in it.
Use the X button to close the window/game.

Controls:
- Move your character with arrow keys
- Use SPACE to fire a damaging bolt
- Use SHIFT + arrow keys to turn your character without ending your turn.

# Features
## Level Generation
A level has three types of tiles: FLOOR, WALL, and STAIRS. There is only one STAIRS tile in an entire level, while the rest are either FLOORs or WALLs.
Obviously, FLOORs represent walkable tiles while WALLs represent obstacles.
1. Levels are semi-randomly generated, and every level consists of 16 equally-sized rooms (4x4 grid of rooms), and every room is a 16x16 grid of tiles.
2. Rooms are assigned a layout from a set of predetermined layouts. There are only a few base layouts, but they can be rotated to increase the variety. As a result, a single base layout has 4 variations.
   - The base layouts are encoded in a .txt file to allow for easy adding of new base layouts. The .txt file is parsed when the game is started.
4. After every room has been assigned a layout, inter-room connections are generated by running a modified depth-first search where the next visited room is randomized. This ensures that there is a path between every room while making room connections somewhat random.
5. For every room connection, a path is generated between two randomly chosen FLOOR tiles from both rooms.
6. A STAIRS tile is placed in a random FLOOR tile in the level.
7. Lastly, 3-6 enemies are randomly placed around the level.

## Gameplay
Gameplay is turn-based, i.e., "enemies move when you move".
You can either move one tile or attack once per turn.
- The game uses a queue to track whether all organisms (player character and enemies) have made their moves. While intuitively sound, this is a mistake as ds_queues in GameMaker only allows access to the head of the queue. As a result, organisms cannot remove themselves from the queue when they die, and each time an organism is at the head of the queue it must be checked whether it is still alive. A ds_list would have been better.
- The bolt attack launches a projectile in the direction the player character is facing (Additionally, there is also dynamic sprite switching depending on the direction the player character is facing) and deals damage if it collides with an enemy. Damage numbers are also generated whenever an organism takes damage.
- There is a dynamic minimap that is progressively revealed as you explore the level.

## Enemy AI
Enemies basically have two behaviours:
1. Attack: When an enemy is directly adjacent to the player character, it will do a melee attack that does damage.
2. Patrol: Otherwise, it patrols the map by selecting a room adjacent to the room its currently in and moving towards a random FLOOR tile in it. Pathfinding is done using Dijkstra's algorithm (I would formally learn Dijkstra's algorithm almost a year after implementing it here). After it has reached its target tile, it will select another room and start moving towards it as well.
